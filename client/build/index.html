<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><link rel="stylesheet" href="http://cdn.leafletjs.com/leaflet/v0.7.7/leaflet.css"/><style>#mapid{height:500px;width:500px}</style><title>Info Market</title><link href="/static/css/main.a27fcaf5.css" rel="stylesheet"></head><body><div id="mapid"></div><script src="http://cdn.leafletjs.com/leaflet/v0.7.7/leaflet.js"></script><script>function onMapClick(o){for(var i=0;i<n;i++)map.removeLayer(mycircle[i]),mycircle[i]=L.circle([info[i][0],info[i][1]],dis,{color:"yellow",fillColor:"#fff200",fillOpacity:.3}).addTo(map);for(var i=0;i<n;++i){document.getElementById(i).style.backgroundColor="transparent"}for(var i=0;i<n;++i){if(o.latlng.distanceTo(L.latLng(info[i][0],info[i][1]))<dis){highlight(i);break}nowhighlight=-1}}function highlight(o){map.removeLayer(mycircle[o]),mycircle[o]=L.circle([info[o][0],info[o][1]],dis,{color:"red",fillColor:"#f03",fillOpacity:.5}).addTo(map),nowhighlight=o,document.getElementById(o).style.backgroundColor="#FFFF33",popup=L.popup().setLatLng([info[o][0],info[o][1]]).setContent(info[o][2]+"<br />Level:"+info[o][3]+"<br />Precipitation:"+info[o][4]+"mm").openOn(map)}var lat_now=23.974034,lng_now=120.979817,int=L.latLng(lat_now,lng_now),map=L.map("mapid");map.setView(int,8);var osmUrl="https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",osm=new L.TileLayer(osmUrl,{minZoom:1,maxZoom:18});map.addLayer(osm);var dis=2e4,popup,nowhighlight=-1;map.on("zoomend",function(){dis=map.getZoom()>12?1250:1250*Math.pow(2,12-map.getZoom());for(var o=0;o<n;o++)map.removeLayer(mycircle[o]),mycircle[o]=L.circle([info[o][0],info[o][1]],dis,{color:"yellow",fillColor:"#fff200",fillOpacity:.3}).addTo(map);-1!=nowhighlight&&(map.removeLayer(mycircle[nowhighlight]),mycircle[nowhighlight]=L.circle([info[nowhighlight][0],info[nowhighlight][1]],dis,{color:"red",fillColor:"#f03",fillOpacity:.5}).addTo(map))});var info=new Array(3);info[0]=new Array(25.021918,121.535285,"臺大綜合體育館","0","0"),info[1]=new Array(23.37224274,120.56951,"嘉義縣中埔鄉中崙村","2","300"),info[2]=new Array(23.84624567,120.93305,"南投縣魚池鄉日月村","1","650"),info[3]=new Array(24.54240519,121.12825,"新竹縣五峰鄉桃山村","2","300"),info[4]=new Array(23.00467245,120.6665632,"高雄市六龜區興龍里","2","850");for(var n=5,mycircle=new Array(n),i=0;i<n;++i)mycircle[i]=L.circle([info[i][0],info[i][1]],dis,{color:"yellow",fillColor:"#fff200",fillOpacity:.3}).addTo(map);map.on("click",onMapClick)</script><div id="root"></div><script type="text/javascript" src="/static/js/main.0b2564a4.js"></script></body></html>